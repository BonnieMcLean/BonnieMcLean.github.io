---
title: "Homework 2"
output: 
  html_notebook:
    toc: true
    toc_float: true
---

## Homework question

For homework, I want you to make your own function to investigate how taking larger and larger samples from a population will give you a sample mean that is closer and closer to the true population mean.

Given a sample size *n*, the function will sample *n* items from a normal distribution with a mean of 42 and a standard deviation of 10.

It will then return the difference between the mean of this sample, and the true mean (42).

Use the function `abs()` when you are returning this difference, so that if the difference is negative, it will be made positive. [abs() gives you the absolute value of a number]

Below I have provided a skeleton of the kind of function you need and the steps you have to take:

```
diff_from_true_mean <- function(sample_size){

   # 1. take a sample of a given size, sample_size, from a normal distribution with a mean of 42, and a standard deviation of 10
   
   # 2. work out the mean of that sample
   
   # 3. return the absolute value of the difference between the mean of that sample, and the true mean of 42

}
```

Don't forget to also RUN YOUR FUNCTION for sample sizes of 100, 1000, 10 000, 100 000, and 1 000 000. You should see that the difference between the sample mean and the true mean gets smaller and smaller the large the sample size. 

If you want to be fancy, you can do this last step in a loop! (But this is not obligatory)

Good luck!

## Sample answer

Here is our function:

```{r}
diff_from_true_mean <- function(sample_size){
  # the rnorm function takes a random sample of numbers from a population with a given mean (42), and a given sample size (10)
  sample <- rnorm(sample_size,42,10)
  
  # figure out the difference between the sample mean, and the population mean (42)
  diff <- 42-mean(sample)
  
  # return the absolute value of this difference
  return(abs(diff))
}
```

We can run it multiple times like this 

```{r}
diff_from_true_mean(100)
diff_from_true_mean(1000)
diff_from_true_mean(10000)
diff_from_true_mean(100000)
diff_from_true_mean(1000000)

```

Notice how the difference from the true mean gets smaller as the samples get larger! Taking a larger sample will get you a better idea of how your population really looks. That's why we have certain sample size requirements for things like drug trials.

If you wanted to make your code shorter, you could run it in a loop, like this:

```{r}
sample_sizes <- c(100,1000,10000,100000,1000000)
for (n in sample_sizes){
  print(diff_from_true_mean(n))
}
```

Or, to save yourself even more typing, you could run it like this:

```{r}
for (i in 2:6){
  n <- 10^i   # 10^2 = 100, 10^3 = 1000, 10^4=10000, etc....
  print(diff_from_true_mean(n))
}
```

If you want to *save your answers* somewhere, we need to make an empty vector to store the answers, and keep adding to it, like this:

```{r}
diffs <- c()
for (i in 2:6){
  n <- 10^i   # 10^2 = 100, 10^3 = 1000, 10^4=10000, etc....
  diff <- diff_from_true_mean(n)
  diffs <- c(diffs,diff)
}
diffs
```

Some people also plotted these values, like this:

```{r}
plot(sample_sizes,diffs,main="Sample mean versus true mean",xlab="Sample size",ylab="Difference")
```

## Extra: logarithmic transformations

Because our sample sizes are so far apart, the x-axis is a little difficult to read. Ebba had a really nice fix for this, by plotting the sample sizes in log10. 

Logarithmic transformations are often used to make data that is very spread apart easier to visualise. 

The most common base is 10. When we take the log10 of a number, *x*, we are trying to find a number *y* such that $10^y = x$

This is just like what we did in our second loop!

Below is our transformed graph, plotting the log10 of the sample_sizes (instead of the raw sample sizes) on the x axis:

```{r}
plot(log10(sample_sizes),diffs,main="Sample mean versus true mean",xlab="Sample size (log10(n))",ylab="Difference")
```

Notice how it is much nicer to read! It is perfectly acceptable to do these kinds of transformations to your data where necessary, in order to make it easier to visualise :)
